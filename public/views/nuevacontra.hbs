<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>{{titulo}}</title>
	<!-- Mobile Specific Metas -->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<!-- Font-->
	<link rel="stylesheet" type="text/css" href="css/nunito-font.css">
	<!-- Main Style Css -->
    <link rel="stylesheet" href="css-login/style.css"/>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">


    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<link rel="stylesheet" href="sweetalert2.min.css">

</head>

<body class="form-v6">
	<div class="page-content">
		<div class="form-v6-content">
			<div class="form-left">
				<img src="/images-login/fondobotellas.jpeg" width="500px" height="560px" alt="form">
			</div>
			<form class="form-detail"  id="login-form">
				<h2>Nueva Contraseña</h2>

				<div class="form-row">
					<input type="text" name="codigo" id="codigo" class="input-text" placeholder="Còdigo de Verificaciòn" >
				</div>
				<div class="form-row">
					<input type="password" name="password" id="password" class="input-text" placeholder="Nueva Contraseña " >
				</div>
                <div class="form-row">
					<input type="password" name="confirmarpass" id="confirmarpass" class="input-text" placeholder="Confirmar Contraseña" >
				</div>
				
				
				<div class="form-row-last">
					<button type="submit" class="ingresar">Confirmar</button></a>
                      <a href="/olvidocontra"><button type="button" class="ingresar">Cancelar</button></a>
				</div>
                
			</form>
		</div>
	</div>

    <script>

		const expresionCodigo = /^\d{5}$/
		const expresionPassword = /^[0-9]{2}[a-zA-Z]{4}$/
        const expresionConfirmarPass = /^[0-9]{2}[a-zA-Z]{4}$/


		const form = document.querySelector('#login-form');


		form.addEventListener('submit' , e => {
			e.preventDefault();
			const codigo = e.target.codigo.value;
			const password = e.target.password.value;
			const confirmarpass= e.target.confirmarpass.value;

            
			try{
				if(codigo == '' || password == '' || confirmarpass == '' ){
					throw ' No se admiten campos vacíos';
				}
				if( !expresionCodigo.test(codigo)){
					throw 'El código digitado no es correcto'
				}

				if(	!expresionPassword.test(password)){
					throw ' Contraseña no cumple ';
					
				}
				if(!expresionConfirmarPass.test(confirmarpass)){
					throw 'La confirmación de la contraseña no cumple';
					
				}
				Swal.fire({
                    icon: 'success',
                    title: 'Contraseña restablecida con éxito'
                }).then(result => {
                    if(result.isConfirmed){
                        window.location.href = '/';
                    }
                });
                


			}catch(e){				
					Swal.fire({
						icon: 'error',
						title: 'ERROR',
						text: e,
						
			})
				

			}
		})

	</script>
    
</body>
</html>