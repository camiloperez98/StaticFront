<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>{{titulo}}</title>
	<!-- Mobile Specific Metas -->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<!-- Font-->
	<link rel="stylesheet" type="text/css" href="css/nunito-font.css">
	<!-- Main Style Css -->
    <link rel="stylesheet" href="css-login/style.css"/>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">


    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<link rel="stylesheet" href="sweetalert2.min.css">

</head>

<body class="form-v6">
	<div class="page-content">
		<div class="form-v6-content">
			<div class="form-left">
				<img src="/images-login/fondobotellas.jpeg" width="500px" height="560px" alt="form">
			</div>
			<form class="form-detail"  id="login-form">
				<h2>Registrar Usuario</h2>
				<div class="form-row">
					<input type="text" name="usuario" id="usuario" class="input-text" placeholder="Usuario" >
				</div>
				<div class="form-row">
					<input type="text" name="email" id="email" class="input-text" placeholder="Email " >
				</div>
				<div class="form-row">
					<input type="password" name="password" id="password" class="input-text" placeholder="Contraseña" >
				</div>
				<div class="form-row">
					<input type="password" name="confirmar" id="confirmar" class="input-text" placeholder="Confirmar Contraseña" >
				</div>
				<div class="form-row-last">
					<button type="submit" class="ingresar">Ingresar</button></a>
				</div>
			</form>
		</div>
	</div>

    <script>

		const expresionEmail = 	/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/  
		const expresionPassword = /^[0-9]{2}[a-zA-Z]{4}$/
        const expresionConfirmarPassw = /^[0-9]{2}[a-zA-Z]{4}$/
        const expresionUsuario = /^[a-zA-Z0-9_-]+$/


		const form = document.querySelector('#login-form');


		form.addEventListener('submit' , e => {
			e.preventDefault();
			const email = e.target.email.value;
			const password = e.target.password.value;
            const confirmar= e.target.confirmar.value;
            const usuario = e.target.usuario.value;

			try{
				if(email == '' || password == '' || confirmar == '' || usuario == ''){
					throw ' No se admiten campos vacíos';
				}
				if(	!expresionEmail.test(email)){
					throw ' Email no cumple con el formato';
					
				}
				if(!expresionPassword.test(password)){
					throw ' Contraseña no cumple con el formato';
					
				}
                if(!expresionConfirmarPassw.test(confirmar)){
					throw ' Contraseña no cumple con el formato';
					
				}
                if(!expresionUsuario.test(usuario)){
					throw ' Usuario no cumple con el formato';
					
				}
				Swal.fire({
                    icon: 'success',
                    title: 'Usuario registrado éxitosamente'
                }).then(result => {
                    if(result.isConfirmed){
                        window.location.href = '/';
                    }
                });

				

			}catch(e){				
					Swal.fire({
						icon: 'error',
						title: 'ERROR',
						text: e,
						
			})
				

			}
		})

	</script>
    
</body>
</html>